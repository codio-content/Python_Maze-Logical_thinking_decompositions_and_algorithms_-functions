<!DOCTYPE html>
<html>
  <head>
    <title>One</title>
    
    <% include include/game.ejs %>    
 
    <script>   
      
      function userScriptLoaded() { 
        
        var hitEnergyEvent = module.tp$getattr('hitEnergyEvent');
        var hitMonsterEvent = module.tp$getattr('hitMonsterEvent');
        
        if(hitEnergyEvent) {
          playerHitEnergy(function(object) {
            Sk.misceval.callsim(hitEnergyEvent);
            removeObject(object);
          });     
        }
         
        if(hitMonsterEvent) {
          playerHitMonster(function(object) {
            Sk.misceval.callsim(hitMonsterEvent);
          });     
        }
                
        createRandomMaze(16,8)       
      }
      
      document.addEventListener('DOMContentLoaded', function() {    
        importPythonGame();
        loadUserScript('/py/ch-1.py')        
      })    
    
    </script>
    
  </head>
  <body>
    <div id="game"></div>
  </body>
</html>
